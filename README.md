# peakCallingPipeline

## Introduction

![](https://github.com/AllenInstitute/peakCallingPipeline/blob/main/Pipelines%20-%20ArchR%20peak%20calling%20pipeline%20schematic.jpg)

## Install workflow

To setup the workflow, start by cloning it in your server.

```
git clone https://github.com/AllenInstitute/peakCallingPipeline
```

Next, load the conda env required to run the workflow. The existing conda environment can be found at TEMP:
```
$ conda env create -f TEMP.yml
$ conda activate atacPipeline
```

This will create a new environment called atacPipeline, which contains all required dependencies for this pipeline.

## Workflow organization
 * configs/ - It includes the necessary configuration files for snakemake. Please use this to modify any required input files and necessary genome files.
 * data/ - Currently the example data is in this folder
 * envs/ - The conda environment used to run the snakemake workflow is here.
 * logs/ - Any logs generated by snakemake workflow can be seen here.
 * output/ - This folders store the results of the analysis
 * rules/ - Rules used as part of the snakemake workflow are here
 * scripts/ - Scripts necessary for the analysis are deposited here

## Running the workflow
You can run the worflow using the snakemake command. First, change to the directory which has the Snakefile. Then, type the following command:

```
(atacPipeline)$ snakemake -c2 -f output/MXT/map.result.rda
```

We are setting the number of cores to 2 in the above samples, and telling snakemake to generated the above file.
